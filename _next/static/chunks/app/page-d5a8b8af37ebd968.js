(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7055:function(e,a,t){Promise.resolve().then(t.bind(t,354))},354:function(e,a,t){"use strict";t.d(a,{default:function(){return u}});var n=t(7437),l=t(2265),s=e=>{let{image:a}=e;return(0,n.jsx)("div",{className:"relative w-full h-[600px] bg-gray-200",children:a&&(0,n.jsx)("img",{src:a,alt:"Annotation target",className:"w-full h-full object-contain"})})},i=e=>{let{onImageLoad:a,onSubmit:t,onClear:l,boundingBoxCount:s,hasImage:i}=e;return(0,n.jsxs)("div",{className:"space-y-4 p-4 bg-white rounded-lg shadow",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Controls"}),(0,n.jsx)("button",{onClick:()=>{let e=prompt("Enter image URL:");e&&a(e)},className:"w-full bg-blue-500 text-white p-2 rounded",children:"Load Image"}),(0,n.jsx)("button",{onClick:t,disabled:!i||0===s,className:"w-full bg-green-500 text-white p-2 rounded disabled:bg-gray-300",children:"Submit Annotation"}),(0,n.jsx)("button",{onClick:l,disabled:!i||0===s,className:"w-full bg-red-500 text-white p-2 rounded disabled:bg-gray-300",children:"Clear Annotations"}),(0,n.jsxs)("p",{children:["Bounding Boxes: ",s]})]})},o=()=>(0,n.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Export"}),(0,n.jsx)("button",{className:"w-full bg-gray-700 text-white p-2 rounded mt-2",children:"Export All Data"})]});let r=e=>{let a=d(),t=a.annotation_records.findIndex(a=>a.image_url===e.image_url);-1!==t?a.annotation_records[t]=e:a.annotation_records.push(e),a.total_images=a.annotation_records.length,a.total_annotations=a.annotation_records.reduce((e,a)=>e+a.bounding_boxes.length,0),a.last_updated=new Date().toISOString(),localStorage.setItem("annotation_data",JSON.stringify(a))},d=()=>{let e=localStorage.getItem("annotation_data");return e?JSON.parse(e):{annotation_records:[],total_images:0,total_annotations:0,last_updated:new Date().toISOString()}},c=()=>{let[e,a]=(0,l.useState)(null),[t,n]=(0,l.useState)([]),[s,i]=(0,l.useState)(null),o=(0,l.useCallback)(e=>{a(e),n([]);let t=new Image;t.onload=()=>{let e=Math.min(800/t.naturalWidth,600/t.naturalHeight,1);i({originalSize:{width:t.naturalWidth,height:t.naturalHeight},displaySize:{width:t.naturalWidth*e,height:t.naturalHeight*e},scaleFactor:e})},t.src=e},[]),d=(0,l.useCallback)(e=>{let a={...e,id:"box_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))};n(e=>[...e,a])},[]),c=(0,l.useCallback)((e,a)=>{n(t=>t.map(t=>t.id===e?{...t,...a}:t))},[]),u=(0,l.useCallback)(e=>{n(a=>a.filter(a=>a.id!==e))},[]),g=(0,l.useCallback)(()=>{e&&s&&(r({session_id:"session_".concat(Date.now()),image_url:e,original_size:s.originalSize,display_size:s.displaySize,scale_factor:s.scaleFactor,annotator:"anonymous",timestamp:new Date().toISOString(),bounding_boxes:t}),n([]),alert("Annotation submitted successfully!"))},[e,s,t]);return{currentImage:e,boundingBoxes:t,imageMetadata:s,loadImage:o,addBoundingBox:d,updateBoundingBox:c,deleteBoundingBox:u,submitAnnotation:g,clearAnnotations:(0,l.useCallback)(()=>{n([])},[])}};var u=()=>{let{currentImage:e,boundingBoxes:a,loadImage:t,addBoundingBox:r,updateBoundingBox:d,deleteBoundingBox:u,submitAnnotation:g,clearAnnotations:h}=c(),[m,b]=(0,l.useState)(!1),x=(0,l.useCallback)(e=>{t(e)},[t]),p=(0,l.useCallback)(()=>{if(0===a.length){alert("Please create at least one bounding box before submitting!");return}g()},[a,g]);return(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 p-4",children:(0,n.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,n.jsxs)("header",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Image Annotation System"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Create bounding boxes for machine learning training data"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,n.jsx)("div",{className:"lg:col-span-3",children:(0,n.jsx)(s,{image:e,boundingBoxes:a,onAddBoundingBox:r,onUpdateBoundingBox:d,onDeleteBoundingBox:u,isDrawing:m,setIsDrawing:b})}),(0,n.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,n.jsx)(i,{onImageLoad:x,onSubmit:p,onClear:h,boundingBoxCount:a.length,hasImage:!!e}),(0,n.jsx)(o,{})]})]})]})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=7055)}),_N_E=e.O()}]);